<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>3&nbsp; Potentsiaalse tulemuse mudel – Põhjuslike seoste hindamine majanduses</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03-regressioon.html" rel="next">
<link href="./pohimoistedkordamiseks.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-70a47bd5681a7291082a5b9f83d58762.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Tulemusi pole",
    "search-matching-documents-text": "sobivat dokumenti",
    "search-copy-link-title": "Kopeeri link otsingule",
    "search-hide-matches-text": "Peida lisavastavused",
    "search-more-match-text": "veel üks vastavus selles dokumendis",
    "search-more-matches-text": "rohkem vastavusi selles dokumendis",
    "search-clear-button-title": "Puhasta",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Tühista",
    "search-submit-button-title": "Esita",
    "search-label": "Otsi"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Lülita külgriba navigeerimist" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02-pom.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Potentsiaalse tulemuse mudel</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Lülita külgriba navigeerimist" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Otsi" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Põhjuslike seoste hindamine majanduses</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Otsi"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Eessõna</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-sissejuhatus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Sissejuhatus</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pohimoistedkordamiseks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Põhimõisted eksamiks kordamiseks</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-pom.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Potentsiaalse tulemuse mudel</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-regressioon.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Regressioonimudeli kasutamine</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-difdif.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Juurdekasvude erinevus (Dif-Dif)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-rdd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Regressiooni katkemise meetod</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-sobitamine.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Sobitamine</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-ivmeetod.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Instrumentmuutuja</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-synthcontr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Sünteetilise võrdlusobjekti meetod</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-mlpuumets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Masinõppemudelid</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-mllasso.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">LASSO mõju hindamisel</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-tehajaideed.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Teha</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sisukord</h2>
   
  <ul>
  <li><a href="#tähistused" id="toc-tähistused" class="nav-link active" data-scroll-target="#tähistused"><span class="header-section-number">3.1</span> Tähistused</a>
  <ul class="collapse">
  <li><a href="#meede-ja-tulemused" id="toc-meede-ja-tulemused" class="nav-link" data-scroll-target="#meede-ja-tulemused">Meede ja tulemused</a></li>
  <li><a href="#individuaalne-mõju" id="toc-individuaalne-mõju" class="nav-link" data-scroll-target="#individuaalne-mõju">Individuaalne mõju</a></li>
  </ul></li>
  <li><a href="#huvipakkuvad-keskmised-mõjud" id="toc-huvipakkuvad-keskmised-mõjud" class="nav-link" data-scroll-target="#huvipakkuvad-keskmised-mõjud"><span class="header-section-number">3.2</span> Huvipakkuvad keskmised mõjud</a>
  <ul class="collapse">
  <li><a href="#ate-keskmine-mõju-populatsioonis" id="toc-ate-keskmine-mõju-populatsioonis" class="nav-link" data-scroll-target="#ate-keskmine-mõju-populatsioonis">ATE – keskmine mõju populatsioonis</a></li>
  <li><a href="#att-keskmine-mõju-osalenutele" id="toc-att-keskmine-mõju-osalenutele" class="nav-link" data-scroll-target="#att-keskmine-mõju-osalenutele">ATT – keskmine mõju osalenutele</a></li>
  <li><a href="#atu-keskmine-mõju-mitteosalenutele" id="toc-atu-keskmine-mõju-mitteosalenutele" class="nav-link" data-scroll-target="#atu-keskmine-mõju-mitteosalenutele">ATU – keskmine mõju mitteosalenutele</a></li>
  <li><a href="#ate-seos-att-ja-atu-ga" id="toc-ate-seos-att-ja-atu-ga" class="nav-link" data-scroll-target="#ate-seos-att-ja-atu-ga">ATE seos ATT ja ATU-ga</a></li>
  </ul></li>
  <li><a href="#näited-ate-att-ja-atu-tõlgendamisest" id="toc-näited-ate-att-ja-atu-tõlgendamisest" class="nav-link" data-scroll-target="#näited-ate-att-ja-atu-tõlgendamisest"><span class="header-section-number">3.3</span> Näited ATE, ATT ja ATU tõlgendamisest</a>
  <ul class="collapse">
  <li><a href="#näide-1-töötajate-koolitusprogramm" id="toc-näide-1-töötajate-koolitusprogramm" class="nav-link" data-scroll-target="#näide-1-töötajate-koolitusprogramm">Näide 1: Töötajate koolitusprogramm</a></li>
  <li><a href="#näide-2-turunduskampaania" id="toc-näide-2-turunduskampaania" class="nav-link" data-scroll-target="#näide-2-turunduskampaania">Näide 2: Turunduskampaania</a></li>
  </ul></li>
  <li><a href="#lihtne-keskmiste-erinevus-ja-nihe" id="toc-lihtne-keskmiste-erinevus-ja-nihe" class="nav-link" data-scroll-target="#lihtne-keskmiste-erinevus-ja-nihe"><span class="header-section-number">3.4</span> Lihtne keskmiste erinevus ja nihe</a>
  <ul class="collapse">
  <li><a href="#lihtne-erinevus-tulemustes" id="toc-lihtne-erinevus-tulemustes" class="nav-link" data-scroll-target="#lihtne-erinevus-tulemustes">Lihtne erinevus tulemustes</a></li>
  <li><a href="#valikunihe-ja-nihe-heterogeensest-mõjust" id="toc-valikunihe-ja-nihe-heterogeensest-mõjust" class="nav-link" data-scroll-target="#valikunihe-ja-nihe-heterogeensest-mõjust">Valikunihe ja nihe heterogeensest mõjust</a></li>
  </ul></li>
  <li><a href="#sutva-stabiilse-ühikunäitaja-eeldus" id="toc-sutva-stabiilse-ühikunäitaja-eeldus" class="nav-link" data-scroll-target="#sutva-stabiilse-ühikunäitaja-eeldus"><span class="header-section-number">3.5</span> SUTVA – stabiilse ühikunäitaja eeldus</a></li>
  <li><a href="#sõltumatuse-eeldus" id="toc-sõltumatuse-eeldus" class="nav-link" data-scroll-target="#sõltumatuse-eeldus"><span class="header-section-number">3.6</span> Sõltumatuse eeldus</a></li>
  <li><a href="#tingimusliku-sõltumatuse-eeldus" id="toc-tingimusliku-sõltumatuse-eeldus" class="nav-link" data-scroll-target="#tingimusliku-sõltumatuse-eeldus"><span class="header-section-number">3.7</span> Tingimusliku sõltumatuse eeldus</a>
  <ul class="collapse">
  <li><a href="#tingimuslik-keskväärtuse-sõltumatus" id="toc-tingimuslik-keskväärtuse-sõltumatus" class="nav-link" data-scroll-target="#tingimuslik-keskväärtuse-sõltumatus">Tingimuslik keskväärtuse sõltumatus</a></li>
  </ul></li>
  <li><a href="#ühine-tugi" id="toc-ühine-tugi" class="nav-link" data-scroll-target="#ühine-tugi"><span class="header-section-number">3.8</span> Ühine tugi</a></li>
  <li><a href="#att-hindamine-cia-abil" id="toc-att-hindamine-cia-abil" class="nav-link" data-scroll-target="#att-hindamine-cia-abil"><span class="header-section-number">3.9</span> ATT hindamine CIA abil</a></li>
  <li><a href="#muid-statistikuid" id="toc-muid-statistikuid" class="nav-link" data-scroll-target="#muid-statistikuid"><span class="header-section-number">3.10</span> Muid statistikuid</a>
  <ul class="collapse">
  <li><a href="#meetme-pakkumise-mõju-intention-to-treat-effect---itt" id="toc-meetme-pakkumise-mõju-intention-to-treat-effect---itt" class="nav-link" data-scroll-target="#meetme-pakkumise-mõju-intention-to-treat-effect---itt">Meetme pakkumise mõju (Intention to treat effect - ITT)</a></li>
  <li><a href="#lokaalne-keskmine-mõju-late" id="toc-lokaalne-keskmine-mõju-late" class="nav-link" data-scroll-target="#lokaalne-keskmine-mõju-late">Lokaalne keskmine mõju (LATE)</a></li>
  <li><a href="#tingimuslik-keskmine-mõju-cate" id="toc-tingimuslik-keskmine-mõju-cate" class="nav-link" data-scroll-target="#tingimuslik-keskmine-mõju-cate">Tingimuslik keskmine mõju (CATE)</a></li>
  </ul></li>
  <li><a href="#kokkuvõte" id="toc-kokkuvõte" class="nav-link" data-scroll-target="#kokkuvõte"><span class="header-section-number">3.11</span> Kokkuvõte</a></li>
  <li><a href="#ülesanded" id="toc-ülesanded" class="nav-link" data-scroll-target="#ülesanded"><span class="header-section-number">3.12</span> Ülesanded</a>
  <ul class="collapse">
  <li><a href="#ülesanne-1." id="toc-ülesanne-1." class="nav-link" data-scroll-target="#ülesanne-1.">Ülesanne 1.</a></li>
  <li><a href="#ülesanne-2." id="toc-ülesanne-2." class="nav-link" data-scroll-target="#ülesanne-2.">Ülesanne 2.</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Potentsiaalse tulemuse mudel</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Potentsiaalse tulemuse mudel (<em>potential outcomes model</em>, POM) on põhjusliku mõju hindamise standardne raamistik statistikas ja majandusteaduses. Mudeli juured on Splawa-Neymani (1923), Roy (1951), Quandt’i (1958) ja Rubini (1974) töödes ning seda nimetatakse sageli Neyman–Rubin–Roy mudeliks. Majandusteadustes sai see populaarseks 1990ndatel.</p>
<p>Põhiidee on lihtne: enne poliitikameedet või sekkumist on igal indiviidil mitu võimalikku tulemust, sõltuvalt sellest, kas ta osaleb meetmes või mitte. Reaalses elus näeme iga indiviidi kohta vaid üht realiseerunud tulemust. Sellest tekib põhjuslikkuse „põhiprobleem”: me ei näe kunagi sama indiviidi samal ajal nii osalemas kui mitte-osalemas.</p>
<p>POM annab süsteemse raamistiku, kuidas defineerida huvipakkuvad suurused (ATE, ATT, ATU, CATE, LATE jne) ning milliste eelduste korral võime neid suuruseid tõlgendada põhjusliku mõju hinnangutena.</p>
<section id="tähistused" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="tähistused"><span class="header-section-number">3.1</span> Tähistused</h2>
<section id="meede-ja-tulemused" class="level3">
<h3 class="anchored" data-anchor-id="meede-ja-tulemused">Meede ja tulemused</h3>
<p>Olgu indiviid (i) jaoks meetmes osalemise tunnus</p>
<p><span class="math display">\[
D_i \in \{0,1\},
\]</span> kus (<span class="math inline">\(D_i = 1\)</span>) tähendab osalemist meetmes ja (<span class="math inline">\(D_i = 0\)</span>) mitteosalemist</p>
<p>Et majandusteadlased on võtnud üle meditsiinivaldkonna meetodit, siis nimetatakse tunnust <span class="math inline">\(D\)</span> inglise keeles <em>treatment</em>. Eesti keelde siiski me ei tõlgi seda kui ravi raamine, vaid pigem “meede” ja “meetmes osalemine”.</p>
<p>Inimesed või ettevõtted, kes osalesid meetmes, nimetamegi “osalusrühm” või “osalusgrupp”. Inimesed või ettevõtted, kes ei osalenud meetmes nimetame “võrdlusrühm” või “võrdlusgrupp”; vahel ka otse inglise keelest tõlkides “kontrollgrupp”.</p>
<p>Defineerime potentsiaalsed tulemused ( <em>potential outcomes</em> ):</p>
<p>Meetmes osalemise korral:</p>
<p><span class="math display">\[ Y_i(1) \quad \text{tulemus, kui } D_i = 1, \]</span></p>
<p>Meetmes mitteosalemise korral:</p>
<p><span class="math display">\[ Y_i(0) \quad \text{tulemus, kui } D_i = 0. \]</span></p>
<p>Reaalselt jälgitav tulemus <span class="math inline">\(Y_i\)</span> on see, mis realiseerub. Kui inimene osaleb meetmes, siis näeme potentsiaalset tulemust meetmes osalemise korral. Kui inimene ei osale meetmes, siis näeme potentsiaalset tulemust meetmes mitteosalemise korral.</p>
<p><span class="math display">\[ Y_i = D_i \, Y_i(1) + (1 - D_i)\, Y_i(0) = Y_i(0) + D_i \, (Y_i(1)-Y_i(0)). \]</span></p>
<p>Alati on meil lisaks ka vektor individuaalseid tunnuseid, mida kasutame kas selgitamaks, mis tegurid mõjutavad meetmes osalemist <span class="math inline">\(D\)</span> või potentsiaalset tulemust <span class="math inline">\(Y_i(1)\)</span> ja <span class="math inline">\(Y_i(0)\)</span>.</p>
<p><span class="math display">\[ X_i = (X_{i1}, X_{i2}, \dots, X_{ik}), \]</span></p>
<p>näiteks sugu, vanus, haridus, piirkond, varasem sissetulek jne.</p>
<p>Meetmes osalemine (<span class="math inline">\(D\)</span>) võib olla määratud mitmel moel.</p>
<p>Meetmes osalemine võib olla täiesti juhuslik (eksogeenne). Näiteks eksperiment, kus osad kaupluse kliendid saavad juhuslikult allahindlust ja osad mitte, ja kaupluse omanik soovib analüüsida inimeste ostude hinnatundlikkust. Või Töötukassas registreeritud osad töötud peavad tulema konsultandi juurde kontorisse tööd otsima, aga teised võivad ise otsida tööd.</p>
<p>Meetmes osalemine võib sõltuda jälgitavatest tunnustest <span class="math inline">\(X\)</span>. Näiteks töötukassa annab tööturukoolitust neile töötutele, kellel on madalam haridustase või kes ei oska eesti keelt. Analüütikutena saame seda arvesse võtta.</p>
<p>Meetme osalemine võib sõltuda mittejälgitavatest tunnustest (mis omakorda on seotud tulemusega <span class="math inline">\(Y\)</span>). Näiteks targemate juhtidega firmad oskavad taotleda Ettevõtluse ja Innovatsiooni Sihtasutuselt eksporditoetust, aga nad omavad ka ise paremaid väliskontakte. Meie analüütikutena, aga ei saa mõõta firma juhtide oskusi. Me arvame, et firmade edukus on seotud eksporditoetusega, aga tegelikult on kõik heade juhtide töö tulemus.</p>
<p>Meetmes osalemise jaoks ei ole üldjuhul vaja keerukat struktuurset mudelit.</p>
</section>
<section id="individuaalne-mõju" class="level3">
<h3 class="anchored" data-anchor-id="individuaalne-mõju">Individuaalne mõju</h3>
<p>Individuaalne põhjuslik mõju indiviidi (i) jaoks on defineeritud kui potentsiaalsete tulemuste vahe.</p>
<p><span class="math display">\[
\delta_i = Y_i(1) - Y_i(0).
\]</span></p>
<p>Sellist mõju ei saa kunagi otse mõõta, sest me ei näe sama indiviidi korraga kahes olekus. Me näeme vaid ühte seisundit. Teist seisundit nimetame ka võrdlusseisundiks või vastandseisundiks ( <em>counterfactual</em> - kontrafaktuaal).</p>
<p>Üksikisiku jaoks mõju hindamise asemel keskendume keskendume populatsiooni- või alampopulatsiooni keskmistele mõjudele.</p>
</section>
</section>
<section id="huvipakkuvad-keskmised-mõjud" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="huvipakkuvad-keskmised-mõjud"><span class="header-section-number">3.2</span> Huvipakkuvad keskmised mõjud</h2>
<section id="ate-keskmine-mõju-populatsioonis" class="level3">
<h3 class="anchored" data-anchor-id="ate-keskmine-mõju-populatsioonis">ATE – keskmine mõju populatsioonis</h3>
<p>Poliitikameetme keskmine mõju (<em>average treatment effect</em>, ATE) on defineeritud kui</p>
<p><span class="math display">\[
\text{ATE} = \mathbb{E}\big[ Y_i(1) - Y_i(0) \big]
           = \mathbb{E}\big[ Y_i(1) \big] - \mathbb{E}\big[ Y_i(0) \big].
\]</span></p>
<p>Tõlgendus: milline oleks keskmine tulemus, kui kogu populatsioon osaleks meetmes, võrreldes olukorraga, kui keegi ei osaleks meetmes. Või, milline oleks meetme oodatav mõju, kui võtame juhuslikult ühe inimese üldkogumist.</p>
</section>
<section id="att-keskmine-mõju-osalenutele" class="level3">
<h3 class="anchored" data-anchor-id="att-keskmine-mõju-osalenutele">ATT – keskmine mõju osalenutele</h3>
<p>Keskmine mõju osalejate jaoks (<em>average treatment effect on the treated</em>, ATT) on</p>
<p><span class="math display">\[
\text{ATT} = \mathbb{E}\big[ Y_i(1) - Y_i(0) \mid D_i = 1 \big].
\]</span></p>
<p>Tõlgendus: kui palju muutuks tulemus nende jaoks, kes tegelikult osalesid, võrreldes hüpoteetilise olukorraga, kus just need samad inimesed ei oleks osalenud.</p>
</section>
<section id="atu-keskmine-mõju-mitteosalenutele" class="level3">
<h3 class="anchored" data-anchor-id="atu-keskmine-mõju-mitteosalenutele">ATU – keskmine mõju mitteosalenutele</h3>
<p>Mitteosalenute keskmine mõju (<em>average treatment effect on the untreated</em>, ATU) on</p>
<p><span class="math display">\[
\text{ATU} = \mathbb{E}\big[ Y_i(1) - Y_i(0) \mid D_i = 0 \big].
\]</span></p>
<p>Tõlgendus: kui palju oleks muutunud mitteosalenute tulemused, kui just nemad oleksid meetmes osalenud.</p>
</section>
<section id="ate-seos-att-ja-atu-ga" class="level3">
<h3 class="anchored" data-anchor-id="ate-seos-att-ja-atu-ga">ATE seos ATT ja ATU-ga</h3>
<p>Olgu</p>
<p><span class="math display">\[
p = \Pr(D_i = 1)
\]</span> osalenute osakaal populatsioonis. Siis on keskmine mõju populatsioonis (ATE) lihtsalt kaalutud keskmine mõjust osalenute (ATT) ja mitte-osalenute jaoks (ATU)</p>
<p><span class="math display">\[
\text{ATE} = p \cdot \text{ATT} + (1 - p) \cdot \text{ATU}.
\]</span></p>
<p>ATT ja ATU võivad olla erinevad, kui mõju on erinev eri sotsiaaldemograafilistes rühmades (nn heterogeenne mõju). Näiteks kui põhiharidusega inimeste jaoks on tööturukoolituse efekt suurem kui kõrgharidusega inimeste jaoks, aga koolitust saanute seas on põhiharidusega inimesi suhteliselt enam, siis ongi ATT suurem kui ATU.</p>
</section>
</section>
<section id="näited-ate-att-ja-atu-tõlgendamisest" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="näited-ate-att-ja-atu-tõlgendamisest"><span class="header-section-number">3.3</span> Näited ATE, ATT ja ATU tõlgendamisest</h2>
<p>Alljärgnevalt mõned rakendusnäited majandusest.</p>
<section id="näide-1-töötajate-koolitusprogramm" class="level3">
<h3 class="anchored" data-anchor-id="näide-1-töötajate-koolitusprogramm">Näide 1: Töötajate koolitusprogramm</h3>
<ul>
<li>Meede: ettevõte viib valitud töötajatele läbi edasijõudnute programmeerimiskoolituse.</li>
<li>Tulemus: tootlikkuse kasv (nt koodi kvaliteet ja kiirus).</li>
<li>Grupid:
<ul>
<li>koolitatud: koolitusele valitud töötajad (D=1);</li>
<li>koolitamata: töötajad, kes koolitust ei saanud (D=0).</li>
</ul></li>
</ul>
<p>Tõlgendused:</p>
<ul>
<li>ATT:<br>
Kui palju paranes tootlikkus koolitusel osalenud töötajatel võrreldes olukorraga, kus just need samad töötajad ei oleks koolitusel osalenud?</li>
<li>ATU:<br>
Kui palju oleks muutunud tootlikkus töötajatel, kes ei osalenud, kui nemad oleksid koolituse saanud?</li>
<li>ATE:<br>
Kui kõik töötajad oleks koolitatud, milline oleks keskmine tootlikkuse kasv ettevõttes?</li>
</ul>
</section>
<section id="näide-2-turunduskampaania" class="level3">
<h3 class="anchored" data-anchor-id="näide-2-turunduskampaania">Näide 2: Turunduskampaania</h3>
<ul>
<li>Meede: ettevõte saadab valitud klientidele e-posti kampaania allahindlusega.</li>
<li>Tulemus: ostutõenäosuse või käibe muutus.</li>
</ul>
<p>Tõlgendused:</p>
<ul>
<li>ATT: milline oli müügi kasv kampaania saanud klientide seas (võrreldes olukorraga, kus need kliendid poleks pakkumist saanud)?</li>
<li>ATU: kui palju oleks muutunud kampaanias mitteosalenud klientide ostutõenäosus, kui neile oleks pakkumine saadetud?</li>
<li>ATE: mis oleks tulemus, kui kampaania saadetaks kõigile klientidele?</li>
</ul>
</section>
</section>
<section id="lihtne-keskmiste-erinevus-ja-nihe" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="lihtne-keskmiste-erinevus-ja-nihe"><span class="header-section-number">3.4</span> Lihtne keskmiste erinevus ja nihe</h2>
<section id="lihtne-erinevus-tulemustes" class="level3">
<h3 class="anchored" data-anchor-id="lihtne-erinevus-tulemustes">Lihtne erinevus tulemustes</h3>
<p>Praktikas alustatakse sageli lihtsa keskmiste erinevuse arvutamisega osalus- ja võrdlusrühma jaoks kasutades nende tegelikke jälgitavaid tulemusi.</p>
<p><span class="math display">\[
\text{SDO}
= \mathbb{E}[Y_i \mid D_i = 1] - \mathbb{E}[Y_i \mid D_i = 0],
\]</span></p>
<p>Inglise keeles SDO - <em>simple difference of outcomes</em>.</p>
<p>Tegelike andmete puhul asendame oodatavad väärtused andmete tegelike väärtustega. (Juhusliku suuruse realisatsiooni tähistame väikese tähega.)</p>
<p><span class="math display">\[
\text{SDO}
= \frac{1}{N_T} \sum_{i=1}^{n} \left( y_i \mid d_i = 1 \right)
- \frac{1}{N_C} \sum_{i=1}^{n} \left( y_i \mid d_i = 0 \right)
\]</span></p>
<p>kus <span class="math inline">\(N_T\)</span> on meetmes osalenud inimeste arv ja <span class="math inline">\(N_C\)</span> on meetmes mitteosalenud inimeste arv.</p>
<p>Üldjuhul ei võrdu see ATE-ga, sest osalejad ja mitteosalejad erinevad süsteemselt omavahel (valikunihe) ning mõju võib olla erinev erinevate inimeste jaoks.</p>
</section>
<section id="valikunihe-ja-nihe-heterogeensest-mõjust" class="level3">
<h3 class="anchored" data-anchor-id="valikunihe-ja-nihe-heterogeensest-mõjust">Valikunihe ja nihe heterogeensest mõjust</h3>
<p>SDO saame kirjutada alljärgneval kujul - liites ja lahutades liikme <span class="math inline">\(\mathbb{E}\big[ Y_i(1) \mid D_i = 0 \big]\)</span></p>
<p><span class="math display">\[
\begin{aligned}
\text{SDO}
&amp;= \mathbb{E}\big[ Y_i(1) \mid D_i = 1 \big]
   - \mathbb{E}\big[ Y_i(0) \mid D_i = 0 \big] \\
&amp;= \underbrace{\mathbb{E}\big[ Y_i(1) - Y_i(0) \mid D_i = 1 \big]}_{\text{ATT}}
   + \underbrace{\Big(\mathbb{E}\big[ Y_i(0) \mid D_i = 1 \big]
   - \mathbb{E}\big[ Y_i(0) \mid D_i = 0 \big]\Big)}_{\text{valikunihe}}.
\end{aligned}
\]</span></p>
<p>Lihtne erinevus sisaldab seega kahte komponenti:</p>
<ul>
<li>tõeline põhjuslik mõju osalenutele (ATT);</li>
<li>valikunihe (selection bias), mis tuleneb sellest, et osalenute ja mitteosalenute potentsiaalsed tulemused ilma meetmeta on erinevad.</li>
</ul>
<p>Kui võrrelda SDO-d ja ATEd, siis tuleb lisaks nihe heterogeense mõju tõttu, sest ATT ja ATU võivad olla erinevad.</p>
<p>Et <span class="math inline">\(\text{ATE} = p \cdot \text{ATT} + (1 - p) \cdot \text{ATU}\)</span>, siis liites ja lahutades ATT, saame kirjutada:</p>
<p><span class="math display">\[\begin{aligned}
\text{ATE}  
&amp;= p \cdot \text{ATT} + \text{ATT} - \text{ATT} + (1 - p) \cdot \text{ATU} \\
&amp;= \text{ATT} - (1-p) \cdot \text{ATT} + (1 - p) \cdot \text{ATU} \\
&amp;= \text{ATT} - (1-p) \cdot (\text{ATT} - \text{ATU}) \\
\end{aligned}
\]</span></p>
<p>Seega saab kirjutada SDO välja järgmiste komponentide summana</p>
<p><span class="math display">\[
\begin{aligned}
\text{SDO}
&amp;= \mathbb{E}\big[ Y_i(1) \mid D_i = 1 \big]
   - \mathbb{E}\big[ Y_i(0) \mid D_i = 0 \big] \\
&amp;= \underbrace{\mathbb{E}\big[ Y_i(1) - Y_i(0) \big]}_{\text{ATE}}
   + \underbrace{\Big(\mathbb{E}\big[ Y_i(0) \mid D_i = 1 \big]
   - \mathbb{E}\big[ Y_i(0) \mid D_i = 0 \big]\Big)}_{\text{valikunihe}}
   + \underbrace{(1 - p) \cdot\Big(\text{ATT}-\text{ATU}\Big)}_{\text{nihe mõju heterogeensusest}}.
\end{aligned}
\]</span></p>
<p>Ehk kokkuvõttes:</p>
<p><span class="math display">\[
\text{SDO} = \text{ATE} + \text{valikunihe} + \text{nihe mõju heterogeensusest}.
\]</span></p>
<p>Ainult juhul, kui puudub valikunihe ja mõju ei ole heterogeenne, võime lihtsat osalusrühma ja võrdlusrühma väärtuste erinevust tõlgendada keskmise põhjusliku mõjuna.</p>
</section>
</section>
<section id="sutva-stabiilse-ühikunäitaja-eeldus" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="sutva-stabiilse-ühikunäitaja-eeldus"><span class="header-section-number">3.5</span> SUTVA – stabiilse ühikunäitaja eeldus</h2>
<p><em>Stable unit treatment value assumption</em> (SUTVA) koosneb kahest osast.</p>
<ol type="1">
<li>Puuduvad interferentsid: ühe indiviidi osalemine ega tulemus ei sõltu sellest, kas teised indiviidid osalevad meetmes või mis on nende tulemus. Formaliseeritult potentsiaalsete tulemuste sõltumatus inimeste <span class="math inline">\(i\)</span> ja <span class="math inline">\(j\)</span> vahel<br>
</li>
</ol>
<p><span class="math display">\[
Y_i^1 \perp Y_j^1, \  Y_i^0 \perp Y_j^0
\]</span> ja meetmes osalemiste sõltumatus</p>
<p><span class="math display">\[
D_i \perp D_j
\]</span></p>
<ol start="2" type="1">
<li>Puuduvad erinevad meetme versioonid: <span class="math inline">\(D=1\)</span> tähendab kõigi jaoks identset sekkumist.</li>
</ol>
<p>SUTVA rikkumise näited:</p>
<ul>
<li>kui üks töötutest osaleb koolitusel, see vähendab teiste töötute võimalust sama koolitust saada;</li>
<li>kui üks töötutest leiab töö, võib see vähendada teiste töötute töö leidmise tõenäosust (konkurents töökohtade pärast);</li>
<li>kui igal aastal koolitatakse suur hulk töötuid, võib see mõjutada palgataset kogu tööturul, muutes nii osalejate kui mitteosalejate palku (nn üldise tasakaalu efekt- general ).</li>
</ul>
<p>SUTVA on POM-i keskne eeldus: ilma selle kehtivuseta ei saa potentsiaalseid tulemusi selgelt defineerida.</p>
</section>
<section id="sõltumatuse-eeldus" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="sõltumatuse-eeldus"><span class="header-section-number">3.6</span> Sõltumatuse eeldus</h2>
<p>Sõltumatuse eeldus ( <em>independence assumption</em> ) tähedab seda, et meetmes osalemine ei sõltu potentsiaalsetest tulemustest.</p>
<p><span class="math display">\[
\big( Y_i^0, Y_i^1 \big) \;\perp\!\!\!\perp\; D_i
\]</span> Kõige lihtsam olukord on juhuslik eksperiment, kus meetmes osalemine määratakse loosiga.</p>
<p>Majandusinimeste vaatevinklist on see rumal eeldus – miks peaks inimene otsustama osalemise ilma silmas pidamata võimalikku kasu? Inimesed otsustavad osaleda meetmes, pidades silmas oma eeldatavat kasu, toimub iseselektsioon ( <em>self-selection</em> ), ning meedet pakkuvad töötajad võivad „koort riisuda” ( <em>cream skimming</em> ), valides osalejateks motiveeritumaid või võimekamaid indiviide.</p>
<p>See on täidetud juhusliku eksperimendi korral. See võib olla osaliselt täidetud kui välised tegurid mõjutavad osalemist, nt seaduse muutused, COVID-19 vmt, kus inimene ise ei saa otsustada meetmes osalemist.</p>
<p>Kui sõltumatuse eeldus on täidetud, siis potentsiaalsed tulemused ei sõltu sellest, kas inimene osales meetmes või mitte.</p>
<p>Potentsiaalne tulemus mitteosalemise korral:</p>
<p><span class="math display">\[
\mathbb{E}[Y_i^0 \mid D_i = 1] = \mathbb{E}[Y_i^0 \mid D_i = 0],
\]</span> ja potentsiaalne tulemus osalemise korral:</p>
<p><span class="math display">\[
\mathbb{E}[Y_i^1 \mid D_i = 1] = \mathbb{E}[Y_i^1 \mid D_i = 0],
\]</span></p>
<p>ja sellisel juhul annab lihtne keskmiste erinevus (SDO) keskmise oodatava mõju ATE:</p>
<p><span class="math display">\[
\text{SDO} = \mathbb{E}[Y_i \mid D_i=1] - \mathbb{E}[Y_i \mid D_i=0] = \text{ATE}.
\]</span> Sellisel juhul puudub valikunihe ja nihe heterogeense mõju tõttu.</p>
</section>
<section id="tingimusliku-sõltumatuse-eeldus" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="tingimusliku-sõltumatuse-eeldus"><span class="header-section-number">3.7</span> Tingimusliku sõltumatuse eeldus</h2>
<p>Tingimusliku sõltumatuse eeldus ( <em>conditional independence assumption</em>, CIA) ütleb, et kui võtame arvesse jälgitavad tunnused (X), siis osalemisotsus ei sõltu enam potentsiaalsetest tulemustest:</p>
<p><span class="math display">\[
\big( Y_i^0, Y_i^1 \big) \;\perp\!\!\!\perp\; D_i \mid X_i.
\]</span></p>
<p>Sarnased terminid kirjanduses:</p>
<ul>
<li>unconfoundedness (Rosenbaum ja Rubin, 1983),</li>
<li>selection on observables (Barnow jt, 1980),</li>
<li>exogeneity (Imbens, 2004),</li>
<li>ignorability (Rubin, 1978).</li>
</ul>
<p>CIA tähendab, et kui võtame arvesse piisavalt rikkalikku selgitavate tunnuste hulga (nt tööpoliitika meetme mõju hindamisel inimese sugu, vanus, haridus, varasem palgatase, varasem töötamise kogemus jne), siis meetmes osalemise otsus on nagu juhuslik.</p>
<section id="tingimuslik-keskväärtuse-sõltumatus" class="level3">
<h3 class="anchored" data-anchor-id="tingimuslik-keskväärtuse-sõltumatus">Tingimuslik keskväärtuse sõltumatus</h3>
<p>Nõrgem versioon on tingimusliku keskväärtuse sõltumatuse eeldus:</p>
<p><span class="math display">\[
\mathbb{E}[ Y_i^0 \mid D_i=1, X_i = x]
= \mathbb{E}[ Y_i^0 \mid D_i=0, X_i = x],
\]</span></p>
<p><span class="math display">\[
\mathbb{E}[ Y_i^1 \mid D_i=1, X_i = x]
= \mathbb{E}[ Y_i^1 \mid D_i=0, X_i = x].
\]</span></p>
<p>See eeldus ütleb, et erinevused keskmistes potentsiaalsetes tulemustes kaovad osalus- ja võrdlusrühma vahel, kui vaatleme piisavalt kitsaid alamrühmi, ehkki jaotuste kujud võivad erineda. (Nt võib tinglik dispersioon olla erinev kahes rühmas.)</p>
</section>
</section>
<section id="ühine-tugi" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="ühine-tugi"><span class="header-section-number">3.8</span> Ühine tugi</h2>
<p>CIA praktiline rakendamine nõuab ühist tuge ( <em>common support</em> ):</p>
<p><span class="math display">\[
0 &lt; \Pr(D_i = 1 \mid X_i = x) &lt; 1
\]</span></p>
<p>kõigi huvipakkuvate <span class="math inline">\(x\)</span> jaoks.</p>
<p>Ühine tugi tähendab, et iga X väärtuse korral peab olema nii osalejaid kui mitteosalejaid. Ei tohi olla selliseid X-i alasid, kus kõik osalevad või ei osale. Vastasel juhul ei saa nendes alamrühmades väärset võrdlust teha.</p>
<p>Näiteks, kui kõik registreeritud töötud, kes on alla 24-aastased peavad osalema tööturukoolitusel, siis meil ei ole neid kellegagi võrrelda ja seega ei ole ühise toe eeldus täidetud.</p>
<p>Praktikas tähendab see ka seda, et ei tohi minna liiga detailsele tasemele väga paljude tunnuste ja kategooriatega, ning sageli kasutatakse pidevate tunnuste puhul intervalljaotust (nt sissetuleku kvantiilid) või vanus 5-aastastes vanusrühmades jm.</p>
</section>
<section id="att-hindamine-cia-abil" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="att-hindamine-cia-abil"><span class="header-section-number">3.9</span> ATT hindamine CIA abil</h2>
<p>Kui CIA ja ühine tugi kehtivad, saame ATT väljendada jälgitavate suuruste abil. Üks võimalus on kirjutada</p>
<p><span class="math display">\[
\text{ATT}
= \mathbb{E}_{X \mid D=1}
  \Big[ \mathbb{E}[Y_i \mid D_i = 1, X_i]
       - \mathbb{E}[Y_i \mid D_i = 0, X_i] \Big].
\]</span></p>
<p>Selitus:</p>
<ol type="1">
<li>jagame andmed (K) rühma X-vektori alusel (nt mehed, vanuses 40–60, kõrgharidusega; mehed, vanuses 40-60, keskharidusega jne);</li>
<li>igas rühmas võrdleme osalenute ja mitteosalenute keskmisi tulemusi;</li>
<li>võtame nende rühmakeskmiste erinevuste kaalutud keskmise, kus kaaludeks on osalenute struktuur osalusrühmas. (Analoogselt kasutame ATU jaoks kaaludena mitte-osalenute struktuuri.)</li>
</ol>
<p>See on mitteparametriline lähenemine CIA eelduse rakendamiseks. Praktikas kasutatakse sageli ka:</p>
<ul>
<li>regressioonimudeleid,</li>
<li>logistilist regressiooni osalemise tõenäosuse hindamiseks ja selle alusel sobitamisel (<em>propensity score matching</em>),</li>
<li>kaalumismeetodeid (<em>inverse probability weighting</em>),</li>
<li>või nende kombinatsioone.</li>
</ul>
</section>
<section id="muid-statistikuid" class="level2" data-number="3.10">
<h2 data-number="3.10" class="anchored" data-anchor-id="muid-statistikuid"><span class="header-section-number">3.10</span> Muid statistikuid</h2>
<section id="meetme-pakkumise-mõju-intention-to-treat-effect---itt" class="level3">
<h3 class="anchored" data-anchor-id="meetme-pakkumise-mõju-intention-to-treat-effect---itt">Meetme pakkumise mõju (Intention to treat effect - ITT)</h3>
<p>Sageli ei saa me kontrollida, kas indiviid tegelikult meetmes osales. Teame vaid, ainult, kas talle pakuti meedet. Näiteks Töötukassa pakub kollektiivse koondamise puhul ettevõtetele ja nende töötajatele teabe jagamiseks kohtumisi, sh uute võimalike tööandjatega. Aga me ei tea täpselt, kes koondatutest nendel üritusel käisid.</p>
<p>Olgu (Z_i) indikaator, kas indiviidile pakuti osalemist. ITT on defineeritud siis kui oodatav erinevus väljundis inimeste vahel, kellele pakuti meedet ja kellele ei pakutud meedet.</p>
<p><span class="math display">\[
\text{ITT} = \mathbb{E}[Y_i \mid Z_i = 1] - \mathbb{E}[Y_i \mid Z_i = 0].
\]</span></p>
<p>ITT mõõdab meetme pakkumise mõju, mitte tegeliku osalemise mõju ning võib olla oluline poliitikamõjude hindamisel, kui meetmes osalemine ei ole täielik.</p>
<p>ITT võib kirjutada ka</p>
<p><span class="math display">\[
\text{ITT}
= \text{ATT} \times \text{PR},
\qquad
\text{kus }
\text{PR}
= \frac{N_{\text{Tegelik osalejate arv meetmes}}}{N_{\text{Plaanitud osalejate arv}}}
\]</span></p>
</section>
<section id="lokaalne-keskmine-mõju-late" class="level3">
<h3 class="anchored" data-anchor-id="lokaalne-keskmine-mõju-late">Lokaalne keskmine mõju (LATE)</h3>
<p>Instrumentmuutuja raamistikus saame määratleda lokaalse keskmise mõju ( <em>local average treatment effect</em> - LATE) indiviididele, kes muudavad oma osalemiskäitumist instrumentmuutuja muutumise tõttu (compliers):</p>
<p><span class="math display">\[
\text{LATE}
= \frac{\mathbb{E}[Y_i \mid Z_i = 1] - \mathbb{E}[Y_i \mid Z_i = 0]}
       {\mathbb{E}[D_i \mid Z_i = 1] - \mathbb{E}[D_i \mid Z_i = 0]}.
\]</span></p>
<p>LATE on keskmine mõju nende indiviidide jaoks, kes „on piiri peal” ning kelle osalemine sõltub instrumendist (näiteks seadusemuudatusest vm).</p>
<p>Sellest räägime pikemalt instrumentmuutuja peatükis.</p>
</section>
<section id="tingimuslik-keskmine-mõju-cate" class="level3">
<h3 class="anchored" data-anchor-id="tingimuslik-keskmine-mõju-cate">Tingimuslik keskmine mõju (CATE)</h3>
<p>Kui mõju on heterogeenne, võib meid huvitada tingimuslik keskmine mõju teatud X-väärtuse korral:</p>
<p><span class="math display">\[
\text{CATE}(x)
= \mathbb{E}\big[ Y_i^1 - Y_i^0 \mid X_i = x \big].
\]</span></p>
<p>CATE võimaldab uurida näiteks:</p>
<ul>
<li>kuidas erineb tööturukoolituse mõju vanusegruppide lõikes;</li>
<li>kuidas sõltub mõju varasemast palgatasemest;</li>
<li>millistele alarühmadele programm kõige rohkem kasu toob.</li>
</ul>
<p>CATE-t vaatame põhjalikumalt kausaalmetsa (causal forest) korral.</p>
</section>
</section>
<section id="kokkuvõte" class="level2" data-number="3.11">
<h2 data-number="3.11" class="anchored" data-anchor-id="kokkuvõte"><span class="header-section-number">3.11</span> Kokkuvõte</h2>
<p>Potentsiaalse tulemuse mudel formaliseerib põhjusliku mõju mõiste, kirjeldades iga indiviidi jaoks kahte potentsiaalset tulemust <span class="math inline">\(Y_i^0\)</span> ja <span class="math inline">\(Y_i^1\)</span>. Kuna reaalses elus näeme ainult üht neist, keskendume erinevatele keskmistele mõjudele (ATE, ATT, ATU, CATE, LATE, ITT) ja eeldustele, mille alusel neid saab hinnata.</p>
<p>Lihtne keskmiste erinevus osalenute ja mitteosalenute vahel SDO on enamasti nihkes keskmise mõju jaoks valikunihke ja heterogeense mõju tõttu. Selleks, et anda põhjuslik tõlgendus, on vaja tugevaid eeldusi (nt juhuslik eksperiment) või realistlikumaid tingimuslikke eeldusi (CIA, ühine tugi) koos sobivate meetoditega (sobitamine, regressioonimudel, kaalumised).</p>
<p>POM on kooskõlas ka teiste lähenemistega, näiteks DAG-id (suunatud asüklilised graafid), mis keskenduvad eelkõige identifitseerimisele. Praktikas kasutatakse sageli POM-i raamistikku koos graafiliste mudelitega, et selgelt sõnastada nii eeldused kui ka hinnatav põhjuslik mõju.</p>
</section>
<section id="ülesanded" class="level2" data-number="3.12">
<h2 data-number="3.12" class="anchored" data-anchor-id="ülesanded"><span class="header-section-number">3.12</span> Ülesanded</h2>
<section id="ülesanne-1." class="level3">
<h3 class="anchored" data-anchor-id="ülesanne-1.">Ülesanne 1.</h3>
<p>On antud andmed 10 töötu kohta ja nende tulevase potentsiaalse palga kohta kaks aastat pärast töötuks jäämist, kui nad peaksid töötusperioodi ajal osalema kohustuslikult 3 kuud tööturukoolitusel.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">Isik</th>
<th style="text-align: center;">Y1</th>
<th style="text-align: center;">Y0</th>
<th style="text-align: center;">δᵢ</th>
<th style="text-align: center;">D</th>
<th style="text-align: center;">Y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">1200</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">1100</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">300</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">4</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">1200</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;">5</td>
<td style="text-align: center;">800</td>
<td style="text-align: center;">400</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">6</td>
<td style="text-align: center;">1500</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;">7</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">1500</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">8</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">1100</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;">9</td>
<td style="text-align: center;">900</td>
<td style="text-align: center;">1100</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">10</td>
<td style="text-align: center;">1400</td>
<td style="text-align: center;">1200</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
<p>Selgitused:</p>
<ul>
<li><span class="math inline">\(Y_1\)</span>: palk, kui nad osaleksid meetmes<br>
</li>
<li><span class="math inline">\(Y_0\)</span>: palk, kui nad ei osaleks meetmes<br>
</li>
<li><span class="math inline">\(\delta_i = Y_1 - Y_0\)</span>: mõju koolitusest<br>
</li>
<li><span class="math inline">\(D\)</span>: koolituses osalemine (0/1)<br>
</li>
<li><span class="math inline">\(Y\)</span>: jälgitav tunnus (tegelik palk, sõltub <span class="math inline">\(D\)</span>-st)</li>
</ul>
<p><em>Küsimused</em></p>
<ol type="1">
<li><p>Arvuta igale inimesele oodatav kasu koolitusmeetmest <span class="math inline">\(\delta_i = Y_1 - Y_0\)</span>.</p></li>
<li><p>Arvuta keskmine mõju meetmest (ATE):</p>
<p><span class="math display">\[
\text{ATE} = \frac{1}{n} \sum_{i=1}^{n} \delta_i.
\]</span></p></li>
<li><p>Eeldame, et töötud teavad, milline on kasu koolitusest, ja koolituse võtavad vastu vaid need, kes sellest saavad kasu (st <span class="math inline">\(\delta_i &gt; 0\)</span>).<br>
Mitu inimest võtavad koolituse vastu?</p></li>
<li><p>Mis on keskmine kasu koolitusest neile, kes koolituses tegelikult osalevad (ATT)?</p>
<p><span class="math display">\[
\text{ATT} = \mathbb{E}[\delta_i \mid D_i = 1].
\]</span></p></li>
<li><p>Mis on keskmine kasu koolitusest neile, kes koolituses tegelikult ei osalenud (ATU)?</p>
<p><span class="math display">\[
\text{ATU} = \mathbb{E}[\delta_i \mid D_i = 0].
\]</span></p></li>
</ol>
<p>Meie analüütikutena ei näe mõlemat potentsiaalset väljundit ja näeme vaid seda olekut, mida töötu kasutas.</p>
<p>Arvuta:</p>
<ol start="6" type="1">
<li><p>SDO (simple difference in outcomes):</p>
<p><span class="math display">\[
\text{SDO} = \mathbb{E}[Y \mid D = 1] - \mathbb{E}[Y \mid D = 0].
\]</span></p></li>
<li><p>Valikunihe (selection bias):</p>
<p><span class="math display">\[
\text{Valikunihe} = \mathbb{E}[Y_0 \mid D = 1] - \mathbb{E}[Y_0 \mid D = 0].
\]</span></p></li>
<li><p>Mõju heterogeensus:</p>
<p><span class="math display">\[
\text{Mõju heterogeensus} = \text{ATT} - \text{ATU}.
\]</span></p></li>
<li><p>Näita, et kehtib</p>
<p><span class="math display">\[
\text{SDO}
= \text{ATE}
+ \text{valikunihe}
+ (1 - p)\,(\text{ATT} - \text{ATU}),
\]</span></p>
<p>kus <span class="math inline">\(p\)</span> on meetmes osalenute osakaal.</p></li>
<li><p>Näita, et kehtib</p>
<p><span class="math display">\[
\text{SDO} = \text{ATT} + \text{valikunihe}.
\]</span></p></li>
</ol>
<details>
<summary>
Näita käsitsi lahendust
</summary>
<ol type="1">
<li>Individuaalsed mõjud <span class="math inline">\(\delta_i\)</span></li>
</ol>
<p><span class="math display">\[
\delta_i = Y_1 - Y_0
\]</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">Isik</th>
<th style="text-align: center;">Y1</th>
<th style="text-align: center;">Y0</th>
<th style="text-align: center;">δᵢ</th>
<th style="text-align: center;">D</th>
<th style="text-align: center;">Y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">1200</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">200</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1200</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">1100</td>
<td style="text-align: center;">-100</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1100</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">300</td>
<td style="text-align: center;">700</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1000</td>
</tr>
<tr class="even">
<td style="text-align: center;">4</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">1200</td>
<td style="text-align: center;">-200</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1200</td>
</tr>
<tr class="odd">
<td style="text-align: center;">5</td>
<td style="text-align: center;">800</td>
<td style="text-align: center;">400</td>
<td style="text-align: center;">400</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">800</td>
</tr>
<tr class="even">
<td style="text-align: center;">6</td>
<td style="text-align: center;">1500</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">500</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1500</td>
</tr>
<tr class="odd">
<td style="text-align: center;">7</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">1500</td>
<td style="text-align: center;">-500</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1500</td>
</tr>
<tr class="even">
<td style="text-align: center;">8</td>
<td style="text-align: center;">1000</td>
<td style="text-align: center;">1100</td>
<td style="text-align: center;">-100</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1100</td>
</tr>
<tr class="odd">
<td style="text-align: center;">9</td>
<td style="text-align: center;">900</td>
<td style="text-align: center;">1100</td>
<td style="text-align: center;">-200</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1100</td>
</tr>
<tr class="even">
<td style="text-align: center;">10</td>
<td style="text-align: center;">1400</td>
<td style="text-align: center;">1200</td>
<td style="text-align: center;">200</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1400</td>
</tr>
</tbody>
</table>
<ol start="2" type="1">
<li>ATE</li>
</ol>
<p><span class="math display">\[
\text{ATE}
= \frac{1}{10} (200 - 100 + 700 - 200 + 400 + 500 - 500 - 100 - 200 + 200)
= \frac{900}{10}
= 90.
\]</span></p>
<ol start="3" type="1">
<li>Kes võtavad koolituse vastu</li>
</ol>
<p>Eeldusel, et koolituse võtavad vaid need, kelle <span class="math inline">\(\delta_i &gt; 0\)</span>, võtavad koolituse vastu isikud:</p>
<p>1, 3, 5, 6 ja 10 → kokku 5 inimest.</p>
<ol start="4" type="1">
<li>ATT</li>
</ol>
<p><span class="math display">\[
\text{ATT}
= \frac{200 + 700 + 400 + 500 + 200}{5}
= \frac{2000}{5}
= 400.
\]</span></p>
<ol start="5" type="1">
<li>ATU</li>
</ol>
<p>Mitteosalenute (δ ≤ 0) indiviidid: 2, 4, 7, 8, 9.</p>
<p><span class="math display">\[
\text{ATU}
= \frac{-100 - 200 - 500 - 100 - 200}{5}
= \frac{-1100}{5}
= -220.
\]</span></p>
<ol start="6" type="1">
<li>SDO</li>
</ol>
<p><span class="math display">\[
\text{SDO}
= \mathbb{E}[Y \mid D = 1] - \mathbb{E}[Y \mid D = 0].
\]</span></p>
<p>Osalejad (D = 1): isikud 1, 3, 5, 6, 10</p>
<p><span class="math display">\[
\mathbb{E}[Y \mid D = 1]
= \frac{1200 + 1000 + 800 + 1500 + 1400}{5}
= \frac{5900}{5}
= 1180.
\]</span></p>
<p>Mitteosalejad (D = 0): isikud 2, 4, 7, 8, 9</p>
<p><span class="math display">\[
\mathbb{E}[Y \mid D = 0]
= \frac{1100 + 1200 + 1500 + 1100 + 1100}{5}
= \frac{6000}{5}
= 1200.
\]</span></p>
<p>Seega</p>
<p><span class="math display">\[
\text{SDO} = 1180 - 1200 = -20.
\]</span></p>
<ol start="7" type="1">
<li>Valikunihe</li>
</ol>
<p><span class="math display">\[
\text{Valikunihe}
= \mathbb{E}[Y_0 \mid D = 1] - \mathbb{E}[Y_0 \mid D = 0].
\]</span></p>
<p><span class="math display">\[
\mathbb{E}[Y_0 \mid D = 1]
= \frac{1000 + 300 + 400 + 1000 + 1200}{5}
= \frac{3900}{5}
= 780.
\]</span></p>
<p><span class="math display">\[
\mathbb{E}[Y_0 \mid D = 0]
= \frac{1100 + 1200 + 1500 + 1100 + 1100}{5}
= \frac{6000}{5}
= 1200.
\]</span></p>
<p><span class="math display">\[
\text{Valikunihe}
= 780 - 1200 = -420.
\]</span></p>
<ol start="8" type="1">
<li>Mõju heterogeensus</li>
</ol>
<p><span class="math display">\[
\text{ATT} - \text{ATU}
= 400 - (-220)
= 620.
\]</span></p>
<ol start="9" type="1">
<li>Seos: SDO = ATE + valikunihe + (1 − p)·(ATT − ATU)</li>
</ol>
<p>Osalejate osakaal <span class="math inline">\(p = 5/10 = 0.5\)</span>.</p>
<p>Vasak pool:</p>
<p><span class="math display">\[
\text{SDO} = -20.
\]</span></p>
<p>Parem pool:</p>
<p><span class="math display">\[
\text{ATE} + \text{valikunihe} + (1 - p)\,(\text{ATT} - \text{ATU})
= 90 + (-420) + 0.5 \cdot 620
= 90 - 420 + 310
= -20
\]</span></p>
<p>Seega seos kehtib.</p>
<ol start="10" type="1">
<li>Seos: SDO = ATT + valikunihe</li>
</ol>
<p><span class="math display">\[
\text{ATT} + \text{valikunihe}
= 400 + (-420)
= -20
= \text{SDO}
\]</span></p>
<p>Seega kehtib ka see seos.</p>
</details>
<details>
<summary>
Näita lahendust Ris
</summary>
<p><em>Lahendus Ris</em></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Teeme andmetabeliks</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>isik <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>y1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1200</span>, <span class="dv">1000</span>, <span class="dv">1000</span>, <span class="dv">1000</span>, <span class="dv">800</span>, <span class="dv">1500</span>, <span class="dv">1000</span>, <span class="dv">1000</span>, <span class="dv">900</span>, <span class="dv">1400</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>y0 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">1100</span>, <span class="dv">300</span>, <span class="dv">1200</span>, <span class="dv">400</span>, <span class="dv">1000</span>, <span class="dv">1500</span>, <span class="dv">1100</span>, <span class="dv">1100</span>, <span class="dv">1200</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(isik, y1, y0) </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Arvuta igale inimesele oodatav kasu koolitusmeetmest</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">deltai =</span> y1<span class="sc">-</span>y0)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Arvuta keskmine mõju meetmest – ATE</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>ate<span class="ot">=</span> <span class="fu">mean</span>(df<span class="sc">$</span>deltai)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>ate</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 90</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Või</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">ate =</span> <span class="fu">mean</span>(deltai)) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(ate)</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 90</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Eeldame, et töötud teavad, milline on kasu koolitusest, ja iga koolituse võtavad vastu vaid need, kes sellest saavad kasu.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Mitu inimest võtavad koolituse vastu?</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>d <span class="ot">=</span> <span class="fu">ifelse</span>(df<span class="sc">$</span>deltai<span class="sc">&gt;</span><span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#või</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">d =</span> <span class="fu">ifelse</span>(deltai <span class="sc">&gt;</span><span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>d)</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
0 1 
5 5 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#või</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>deltai<span class="sc">&gt;</span><span class="dv">0</span>)</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
FALSE  TRUE 
    5     5 </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Mis on keskmine kasu koolitusest neile, kes koolituses tegelikult osalevad? ATT</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>att <span class="ot">=</span> <span class="fu">mean</span>(df<span class="sc">$</span>deltai[df<span class="sc">$</span>deltai<span class="sc">&gt;</span><span class="dv">0</span>])</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>att</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 400</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Või</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>(att2 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(deltai<span class="sc">&gt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">att =</span> <span class="fu">mean</span>(deltai)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(att))</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 400</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Mis on keskmine kasu koolitusest neile, kes koolituses tegelikult ei osalenud? ATU</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>atu <span class="ot">=</span> <span class="fu">mean</span>(df<span class="sc">$</span>deltai[df<span class="sc">$</span>deltai<span class="sc">&lt;</span><span class="dv">0</span>])</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>atu</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -220</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) SDO</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Erinevus jälgitavates tulemustes</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SDO = E(Y1|D=1) - E(Y0|D=0)</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>sdo <span class="ot">=</span> <span class="fu">mean</span>(df<span class="sc">$</span>y1[df<span class="sc">$</span>d <span class="sc">==</span> <span class="dv">1</span>]) <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>y0[df<span class="sc">$</span>d <span class="sc">==</span> <span class="dv">0</span>]) </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>sdo</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -20</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 7) Valikunihe</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">#E(Y0|D=1) - E(Y0|D=0)</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>valikunihe <span class="ot">=</span> <span class="fu">mean</span>(df<span class="sc">$</span>y0[df<span class="sc">$</span>d <span class="sc">==</span> <span class="dv">1</span>]) <span class="sc">-</span> <span class="fu">mean</span>(df<span class="sc">$</span>y0[df<span class="sc">$</span>d <span class="sc">==</span> <span class="dv">0</span>]) </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>valikunihe</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -420</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 8) Mõju heterogeensus (1-pii)*(ATT-ATU)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>hetnihe <span class="ot">=</span> (<span class="dv">1</span><span class="sc">-</span><span class="fu">sum</span>(df<span class="sc">$</span>d)<span class="sc">/</span><span class="fu">nrow</span>(df)) <span class="sc">*</span> (att <span class="sc">-</span> atu)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>hetnihe</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 310</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 9) Näita, et kehtib. SDO = ATE + valikunihe + (1-meetmes osalenute osakaal)*nihe mõju heterogeensusest</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>sdo</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -20</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>ate <span class="sc">+</span> valikunihe <span class="sc">+</span> hetnihe</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -20</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Kehtib</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 10) Näita, et kehtib SDO = ATT + valikunihe</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>att <span class="sc">+</span> valikunihe</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -20</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Kehtib</span></span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</details>
</section>
<section id="ülesanne-2." class="level3">
<h3 class="anchored" data-anchor-id="ülesanne-2.">Ülesanne 2.</h3>
<p>Rahvusvaheline firma viis läbi oma ühe allüksuse müügiagentide seas müügikoolituse. Et hinnata müügikoolituse mõju, jagati osalejad juhuslikult kahte rühma piirkonna lõikes: ühed said koolitust (osalusgrupp) ja teised ei saanud (võrdlusgrupp).</p>
<p>Koolituse mõju hindamiseks kasutatav näitaja oli keskmine palgale juurde makstav tulemustasu järgneva 12 kuu jooksul, mis sõltus otseselt inimeste personaalselt sõlmitud lepingutest. Andmed on toodud järgmises tabelis.</p>
<p><em>Andmed pärast koolitust</em></p>
<table class="caption-top table">
<colgroup>
<col style="width: 17%">
<col style="width: 20%">
<col style="width: 33%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Piirkond</th>
<th style="text-align: left;">Grupp</th>
<th style="text-align: right;">Inimesed, keda jälgiti</th>
<th style="text-align: right;">Keskmine tulemustasu</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Põhja-Eesti</td>
<td style="text-align: left;">Osalusgrupp</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">150</td>
</tr>
<tr class="even">
<td style="text-align: left;">Põhja-Eesti</td>
<td style="text-align: left;">Võrdlusgrupp</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">120</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Lõuna-Eesti</td>
<td style="text-align: left;">Osalusgrupp</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">150</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lõuna-Eesti</td>
<td style="text-align: left;">Võrdlusgrupp</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">140</td>
</tr>
</tbody>
</table>
<p>Leidke eraldi piirkondade lõikes ja kogu firmas, eeldades CIA kehtivust (conditional independence assumption) ning kasutades osalus- ja võrdlusgrupi diferents-hinnangut:</p>
<ol type="1">
<li>Mõju osalusgrupile (average treatment effect on treated – ATT)<br>
</li>
<li>Mõju võrdlusgrupile, kui ta oleks osalenud (average treatment effect on untreated – ATU)<br>
</li>
<li>Oodatav mõju kogu firmale, kui kõik oleksid osalenud (average treatment effect – ATE)<br>
</li>
<li>Arutlege, kas mõju hindamiseks vajalikud eeldused on täidetud.</li>
</ol>
<p><em>Täiendav info ja teine olukord</em></p>
<p>Tagantjärgi selgus, et analüütik tegi vea ja inimeste jagamine ei olnud päris juhuslik, vaid selle otsustas personalitöötaja. Seega ei saanud eeldada, et inimeste võimekus oli ühesugune.</p>
<p>Analüüsi parandamiseks võeti kasutusele koolituseelsed müüginumbrid, mis olid järgmised.</p>
<p><em>Andmed enne koolitust</em></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">Piirkond</th>
<th style="text-align: left;">Grupp</th>
<th style="text-align: right;">Keskmine tulemustasu enne koolitusi</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Põhja-Eesti</td>
<td style="text-align: left;">Osalusgrupp</td>
<td style="text-align: right;">140</td>
</tr>
<tr class="even">
<td style="text-align: left;">Põhja-Eesti</td>
<td style="text-align: left;">Võrdlusgrupp</td>
<td style="text-align: right;">120</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Lõuna-Eesti</td>
<td style="text-align: left;">Osalusgrupp</td>
<td style="text-align: right;">140</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lõuna-Eesti</td>
<td style="text-align: left;">Võrdlusgrupp</td>
<td style="text-align: right;">160</td>
</tr>
</tbody>
</table>
<p>Millised võiksid olla ATT, ATU ja ATE hinnangud nüüd, kasutades väljundina tulemustasu <strong>muutust</strong> (pärast koolitust miinus enne koolitust):</p>
<p>1.ATT: keskmine mõju nendele, kes osalesid koolitusel<br>
2. ATU: keskmine mõju nendele, kes ei osalenud, kui nad oleksid osalenud<br>
3. ATE: oodatav keskmine mõju kogu firmale, kui kõik oleksid osalenud</p>
<details>
<summary>
Näita lahendust Ris
</summary>
<p><em>Lahendus Ris</em></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Teeme lähteandmed Ri andmetabeliks</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>piirkond <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Pohi"</span>, <span class="st">"Louna"</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>osalus_n <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">20</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>vordlus_n <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">10</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>osalus_y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">150</span>, <span class="dv">150</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>vordlus_y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">120</span>, <span class="dv">140</span>)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(piirkond, osalus_n, vordlus_n, osalus_y, vordlus_y)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  piirkond osalus_n vordlus_n osalus_y vordlus_y
1     Pohi       40        30      150       120
2    Louna       20        10      150       140</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Leidke eraldi piirkondade lõikes ja kogu firmas, eeldades CIA kehtivust (conditional independence assumption) ning kasutades osalus- ja võrdlusgrupi erinevust</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>moju <span class="ot">&lt;-</span> df<span class="sc">$</span>osalus_y<span class="sc">-</span>df<span class="sc">$</span>vordlus_y</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>moju</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30 10</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Kaalud</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">kaal_ate =</span> (osalus_n <span class="sc">+</span> vordlus_n) <span class="sc">/</span> <span class="fu">sum</span>(osalus_n <span class="sc">+</span> vordlus_n),</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">kaal_att =</span> osalus_n <span class="sc">/</span> <span class="fu">sum</span>(osalus_n),</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">kaal_atu =</span> vordlus_n <span class="sc">/</span> <span class="fu">sum</span>(vordlus_n))</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 1)    Mõju osalusgrupile (average treatment effect on treated - ATT)</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2)    Mõju võrdlusgrupile, kui ta oleks osalenud (average treatment effect on untreated - ATU)</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 3)    Oodatav mõju kogu firmale, kui kõik oleksid osalenud (average treatment effect - ATE) </span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">att =</span> <span class="fu">sum</span>(moju<span class="sc">*</span>kaal_att),</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">atu =</span> <span class="fu">sum</span>(moju<span class="sc">*</span>kaal_atu),</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>                 <span class="at">ate =</span> <span class="fu">sum</span>(moju<span class="sc">*</span>kaal_ate))</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>       att atu ate
1 23.33333  25  24</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tagantjärgi täeindav info</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>osalus_y_enne <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">140</span>, <span class="dv">120</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>vordlus_y_enne <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">140</span>, <span class="dv">160</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">bind_cols</span>(<span class="fu">data.frame</span>(osalus_y_enne,vordlus_y_enne))</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  piirkond osalus_n vordlus_n osalus_y vordlus_y moju kaal_ate  kaal_att
1     Pohi       40        30      150       120   30      0.7 0.6666667
2    Louna       20        10      150       140   10      0.3 0.3333333
  kaal_atu osalus_y_enne vordlus_y_enne
1     0.75           140            140
2     0.25           120            160</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Muutus müügis</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">osalus_dy =</span> osalus_y <span class="sc">-</span> osalus_y_enne, </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vordlus_dy =</span> vordlus_y<span class="sc">-</span> vordlus_y_enne,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">moju_dy =</span> osalus_dy<span class="sc">-</span> vordlus_dy)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Arvestades muutust</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">att =</span> <span class="fu">sum</span>(moju_dy<span class="sc">*</span>kaal_att),</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">atu =</span> <span class="fu">sum</span>(moju_dy<span class="sc">*</span>kaal_atu),</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">ate =</span> <span class="fu">sum</span>(moju_dy<span class="sc">*</span>kaal_ate))</span></code></pre></div><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>       att atu ate
1 36.66667  35  36</code></pre>
</div>
</div>
</details>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Kopeeritud!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Kopeeritud!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./pohimoistedkordamiseks.html" class="pagination-link" aria-label="Põhimõisted eksamiks kordamiseks">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Põhimõisted eksamiks kordamiseks</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03-regressioon.html" class="pagination-link" aria-label="Regressioonimudeli kasutamine">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Regressioonimudeli kasutamine</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>